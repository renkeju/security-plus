================================
课题B：配置目录服务
================================

在许多组织中，目录服务在维护所有用户，计算机和任何其他需要网络访问的实体的身份识别和访问定义方面有着重要作用。你将配置这些服务以维护安全原则。

目录服务
---------------

目录服务（directory service）是一种网络服务，用于存储特定网络中所有对象的身份信息，包括用户、组、服务器、客户端、打印机和网络服务。目录还为目录对象和网络资源提供了用户访问控制。目录服务也可用于集中安全性并控制对各个网络资源的访问。

典型目录服务的结构通常是网络对象的分层树。树的顶部是根组件，如组织本身，下面由其他对象的分支。这使得目录服务能更好地对其对象进行分类。

目录机制
^^^^^^^^^^^^^^^

目录结构由模式（schema）控制，该模式定义了如何创建对象以及对象有哪些特征地规则。大多数机制是可扩展地，因此可以被加以修改以支持组织的特定需求。

轻型目录访问协议
------------------------

轻型目录访问协议[lightweight Directory Access Protocol（LDAP）]是一种通过传输控制协议/Internet协议（TCP/IP）网络运行的目录服务协议。LDAP客户端向LDAP服务进行身份验证，并且服务的机制定义了客户端在访问目录数据库时可以和不可以执行的任务，目录查询必须采用的形式以及目录服务器响应的方式。LDAP机制是可扩展的，这意味着你可以对其进行更改或添加。

目录管理工具
^^^^^^^^^^^^^^^^^^^

多种目录服务的实施都附带一些自己的管理工具。此外，开源和闭源提供商还提供了各种各样可用的第三方LDAP浏览和管理工具。

虽然明文编辑器在故障排除的情形中比较有用，但图形用户界面（GUI）使用程序通常变得更易于使用。除了预配置的工具，还可以创建使用LDAP的脚本来自动执行例行目录维护任务，如添加大量用户或组，以及检查空白密码，禁用或过时的用户账户。

LDAP安全
------------------

安全LDAP(LDAPS)是一种使用安全套接字层/传输层安全（SSL/TLS）加密协议来实施LDAP的方法，这种方法可以防止窃听和中间人攻击。LDAPS强制要求客户端和服务器在进行任何传输之前先建立安全的连接，并且如果安全连接被中断或丢弃，LDAPS就会关闭连接。实施LDAPS的服务器需要一个由证书颁发机构颁发的签名证书，并且客户端必须在它们的机器上接收并安装证书。

常见的目录服务
---------------------

可用且稳健的目录服务有多种多样，有付费或免费的，开源或闭源的。下表介绍了最常见的一些。

.. csv-table:: 常见的目录服务
    :header: "目录服务", "描述"
    :widths: 5 30 

    "Active Directory", "Microsoft提供的目录服务，为单个域或多个域保存所有网络对象的信息。Active Directory允许管理员使用控制列表（ACL）集中管理和控制都资源的访问。它允许用户在网络的任何地方寻找资源。Active Directory 还有一个用于控制账户创建方式以及管理员可以为账户分配哪些属性的机制。Active Directory 轻型目录服务（AD LDS）是Active Directory的轻量级版本。"
    "Oracle Directory Server 企业版本（ODSEE）", "Oracle Directory Server 企业版本面向需要可扩展性的大型安装。该软件是免费的，可从Oracle获得付费支持。在Sun Microsystems被Oracle之前，ODSEE以前被称为Sun Java System Directory Server。"
    "OpenDJ", "在Linux、Unix、Microsoft Windows和macOS上运行的开源目录服务器。OpenDJ是由ForgeRock使用Java编写。它支持LDAPv3和目录服务标记语言版本2（DSMLv2）。OpenDJ是基于Sun的OpenDS服务开发的，OpenDS服务已不再进行维护。"
    "OpenLDAP", "一种开源LDAP实现，具有适用于大多数操作系统的版本。OpenLDAP包含在许多Linux发行版中。"
    "Open Directory", "苹果公司定制的OpenLDAP实施，是MacOS服务器操作系统的一部分。开放目录与Active Directory有些兼容，并集成了LDAP和Kerberos标准。"

备份活动目录
------------------------------

在加固Active Directory之前，你应该对它进行备份以防止出现任何问题。通过在Windows备份工具中备份计算机的系统状态数据来备份Active Directory。除Active Directory以外，备份计算机的系统状态数据还备份了以下组成部分：

* Windows Registry
* COM + Class Registration Database
* 启动和系统文件
* Certificate Services数据库（如果你有在服务器上安装Certificate Service）
* SYSVOL目录（如果服务器是域控制器）
* IIS配置文件（如果你有安装IIS）
