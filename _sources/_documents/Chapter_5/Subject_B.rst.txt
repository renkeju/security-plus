====================================
课题B：实现云和虚拟化的安全性
====================================

许多组织不仅将他们的主机功能迁移到内部虚拟方案中，还通过云迁移到外部虚拟方案中。两种情况都呈现了特殊的安全问题。

虚拟化
------------------

虚拟化（Virtualization）过程是指创建模拟的计算环境。虚拟化系统能够模拟典型计算机的硬件，操作系统何况应用程序，但它却不是一台真正的物理计算机。比如，你有一台Windows Server 2016物理计算机。在这台计算机中，你可以创建并运行一个运行Linux操作系统的虚拟计算机。这个虚拟计算机被还称为虚拟机[Virtual machine(VM)]。操作Linux虚拟机与使用运行着Linux的物理计算机有着非常相似的结果。唯一的不同就是，你是通过Windows Server上的应用程序来操作虚拟机的。

创建虚拟机并使用其他形式的虚拟化有几种好处。虚拟机比物理计算机更易管理，因为控制着虚拟机的操作系统提供了能够容易的启动、停止、一次性配置多个虚拟系统等多种选项。减少使用硬件还降低了操作的成本。虚拟机还能更高效地运行，消耗更少的能源和物理资源。

超级管理器
----------------------

超级管理器（hypervisor）是将虚拟软件与其运行的物理硬件分离开来的软件层。超级管理器管理物理主机中的资源，并将它们提供给多个虚拟环境（guest）。通过在单一的主机系统上运行多个客户系统，实现了额外的灵活性并提高了硬件利用效率，每个客户系统都作为一个独立系统进行。

超级管理器可以进一步被分为两种基本类型：Ⅰ型和Ⅱ型。当管理客户虚拟环境时，Ⅰ型超级管理器直接在主机的硬件上运行。另一方面，Ⅱ型超级管理器实际上在主机操作系统的最高层中以应用程序的形式运行。这就在超级管理器和硬件之间又加了一层。Ⅱ型超级管理器通常比Ⅰ型更慢，并且为虚拟机管理添加了一层额外的复杂性。

.. note:: Ⅰ型超级管理器也被称为裸机型超级管理程序。

应用程序容器
^^^^^^^^^^^^^^^^^^^^

应用程序容器（application container）或应用程序单元（application cell）是一种虚拟化方式，表示应用程序在主机操作系统的独立容器中运行。容器不会像虚拟机一样运行完整的操作系统；当容器需要使用操作系统时，主机操作系统为它们提供了所需的操作资源。因此，容器能够比典型的虚拟机更高效地运行。

虚拟桌面架构系统
---------------------------

虚拟桌面基础架构[Virtual desktop infrastructure（VDI）]使用虚拟化将个人计算环境与用户地物理机分离开来。在VDI中，桌面操作系统和应用程序在虚拟机内运行，这些虚拟机被托管在虚拟化基础架构中地服务器上。运行桌面操作系统地虚拟机被称为虚拟桌面环境[virtual desktop environment（VDE）]。

在你的组织中为用户部署VDE能使你更容易地管理并监控这些环境，减少与物理计算机有关的一些成本。

虚拟化的安全性
---------------------

有一些与虚拟化基础架构有关的安全问题。

.. csv-table:: 虚拟化的安全性
    :header: "安全问题", "描述"
    :widths: 5 30

    "补丁管理", "补丁管理系统应当部署到位，以确保安装了所有相关补丁。这对那些针对虚拟化软件本身发布的任何补丁来说就尤为重要。另外，必须进行仔细地分析，确定通过操作系统补丁是否应当或什么时候在主机和客户机上安装。"
    "最小权限", "在为任何虚拟环境确定访问控制分配时，必须应用最小权限地概念。必须定期监控对所有环境的访问行为，防止未授权访问。"
    "日志", "虚拟环境中的用户和系统活动应当进行记录并审核，检查不寻常的活动和任何可能的安全泄露。"
    "联网", "虚拟联网设备的安全能力可能不会完全和物理设备一样。如特定模式下的虚拟交换机在可能无法将虚拟基础架构中的主机和客户机之间或客户机与客户机之间的流量分离开来。由于最佳实践是仅在必要的时候启用系统间的网络连接，你应当特别注意如何配置你的虚拟网络设备。"
    "快照", "持续不断地捕捉快照（snapshot）或特定时间点上的虚拟环境状态，就能在虚拟环境被破坏或性能降低时提供一种快速简单的方法恢复整个环境。"
    "避免VM蔓延", "虚拟机蔓延（VM sprawl）发生在虚拟机数量超出组织的控制或管理能力之时。如果你正在处理虚拟机蔓延，受影响的VM可能会被轻易忽略。避免虚拟机蔓延的最佳方式之一就是使用虚拟机生命周期管理[VM lifecycle management(VMLM)]方案。VMLM方案为你提供了一个能够维护和监控组织中所有虚拟机的中央控制面板。"
    "VM逃逸保护", "虚拟机逃逸（VM escape）发生在攻击者在虚拟机上执行代码，允许运行在虚拟机上的应用程序脱离虚拟环境并直接与超级管理器互动时。攻击者可能可以访问最底层的主机操作系统，因此也能访问运行在主机上的所有其他虚拟机。防止虚拟机逃逸的最佳方式就是确保你的虚拟软件保持最新。你还可以尝试限制主机和客户机之间的资源共享功能。"

云计算
----------------

云计算（Cloud computing）是一种计算方式，其中包含了通过大型分布式网络进行的实时通讯，以便为用户、企业或组织提供资源、软件、数据和媒体需求。这种计算方式通常需要依赖互联网来提供计算能力，这是单个机器做不到的。“云”是指在特定网络上可用的资源。可能包括商业网站、消费者网站、云存储服务、基于IT的服务、文件编辑应用程序和社交网站。

云计算背后的主要思想就是你可以从世界任意地方的任意计算机中访问并管理你的数据和应用程序，而存储方式和位置不会立即可见。云计算几乎总是使用一种或多种虚拟化方式来确保资源能快速简便地提供给需要地客户。因此，虚拟化的安全影响与云的安全密切相关。

内部部署vs.云环境
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

云帮助组织将管理内部部署系统的要求和复杂性转移给第三方供应商。当这些系统托管在云端时，组织就能集中精力管理商业的其他方面。但是，云的缺点就是组织无法完全控制被托管的系统——即使作为客户的组织有一定能力管理系统，但云供应商才是最终掌握控制权的一方。

云部署模型
------------------

可以使用四种基本方法来部署云计算技术。下表描述了这些方法。

.. csv-table:: 云部署模型
    :header: "部署", "描述"
    :widths: 5 30

    "私有", "私有云服务通常由单个公司或其他商业实体通过私有网络发布。这种托管可能在内部进行，或在异地进行。使用私有云计算，组织能够更好地控制服务的私密性和安全性。这种交付方式更多地针对在运营中需要严格访问控制的银行和政府服务。"
    "公共", "公共云时由向普通客户提供服务的组织通过互联网进行部署的。在这种模型下，企业能够提供按订阅或按需付费的融资方式，同时还能提供免费的低层次服务。由于公共计算机依赖互联网，安全一直都是一个问题。"
    "社群", "当多个组织共享云服务的所有权时，将以社群云的方式部署。这通常时为了集中资源以便用于共同关心的问题，如标准化和安全策略。"
    "混合", "混合云计算在一个实体中结合了两种或多种部署方式。这种方法的好处就是组织不仅能够依赖内部云服务进行业务操作，还能向公众提供计算服务。"

云服务的类型
-------------------------

下表描述了云计算提供给用户的四种主要服务。

.. csv-table:: 云服务的类型
    :header: "服务", "描述"
    :widths: 5 30

    "软件", "软件即服务[Software as a Service(Saas)]是指使用云向客户提供应用程序。这种服务无需用户在他们的计算机上安装软件，也不需要组织购买和维护软件版本。这样的例子包括 Microsoft Office 365、Salesforce 和 Google G Suite。"
    "平台", "平台即服务[Platform as a Service(Paas)]是指使用云向客户提供虚拟系统，如操作系统。这样的例子包括Oracle数据库、Microsoft Azure SQL数据库和Google App Engine"
    "基础设施", "基础设施即服务[Infrastructure as a Service(Iaas)]是指使用云提供客户端所需的任意或所有基础设施访问。这包括数据中心、服务器、或任何所需的联网设备。IaaS能保障客户端的服务质量（QoS）。这样的例子包括Amazon Elastic Compute Cloud、Microsoft Azure Virtual Machines 和 OpenStack。"
    "安全", "安全即服务[Security as a Service(SECaaS)]使客户能够利用云供应商在计算机安全的特定区域内提供的信息、服务、软件、基础设施和流程。这包括认证机制，防恶意软件方案，入侵检测系统以及更多。这样的例子有Cloudflare，FireEye 和 SonicWall。"

.. note:: 一些服务类型之间有重叠，一些组织能提供包含多种服务类型的套件。

云访问安全代理
^^^^^^^^^^^^^^^^^^^^^^^^

一些SECaaS供应商能提供云访问安全代理[cloud access security broker(CASB)]服务，这些服务实质上是安装在组织内部部署和云网络之间的安全网关，确保往来的流量符合安全策略。

保护虚拟和基于云的资源的标准
--------------------------------------

保护虚拟和基于云的资源时：

* 考虑在你的组织中使用虚拟化，实现更简单高效的资源管理。
* 认识不同虚拟机类型之间的区别并确定哪种最符合你的要求。
* 确保VM软件以及主机和客户机的操作系统都定期地打补丁。
* 对访问虚拟机执行最小权限原则。
* 确保虚拟机记录关键事件的日志。
* 配置虚拟联网设备，以支持必要的隔离通讯。
* 记录最佳虚拟机状态的快照。
* 结合使用虚拟机生命周期管理方案。
* 熟悉不同的云部署模型和服务类型。
* 考虑利用SECaaS将一些安全操作转移给第三方供应商。